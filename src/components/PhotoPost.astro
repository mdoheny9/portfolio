---
const { title, description, image, date, camera, link } = Astro.props;
let formattedDate = date;
if (date) {
  const d = new Date(date);
  formattedDate = `${String(d.getMonth() + 1).padStart(2,'0')}/${String(d.getDate() + 1).padStart(2,'0')}/${d.getFullYear()}`;
}
const modalId = `modal-id-${title.replace(/\s+/g, '-').toLowerCase()}`;
---
<div class="thumbnail">
    <img 
        src={`/assets/photos/thumbnails/${image}`}
        alt={title}
        class="thumbnail-info"
        onclick={`document.getElementById('${modalId}').classList.add('active')`}
        loading="lazy"
        decoding="async"
    />
</div>

<!-- Modal -->
<div id={modalId} class="modal" onclick="this.classList.remove('active')">
  <div class="modal-content" onclick="event.stopPropagation()">
    <span class="close-btn" onclick={`document.getElementById('${modalId}').classList.remove('active')`}>&times;</span>
    <img src={`/assets/photos/${image}`} alt={title} loading="lazy" onclick=`window.open("${link}")`/>
    <div class = "photo-info">
        <p>{description}</p>
        <p style="color:rgba(170,170,170,.6)">Taken on {formattedDate} using {camera}</p>
    </div>
  </div>
</div>